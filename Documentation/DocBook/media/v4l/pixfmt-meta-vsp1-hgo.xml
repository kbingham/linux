<refentry id="V4L2-META-FMT-VSP1-HGO">
  <refmeta>
    <refentrytitle>V4L2_META_FMT_VSP1_HGO ('VSPH')</refentrytitle>
    &manvol;
  </refmeta>
  <refnamediv>
    <refname>
      <constant>V4L2_META_FMT_VSP1_HGO</constant>
    </refname>
    <refpurpose>Renesas R-Car VSP1 1-D Histogram Data</refpurpose>
  </refnamediv>
  <refsect1>
    <title>Description</title>
    <para>
This format describes histogram data generated by the Renesas R-Car VSP1 1-D
Histogram (HGO) engine.
    </para>
    <para>
The VSP1 HGO is a histogram computation engine that can operate on RGB, YCrCb
or HSV data. It operates on a possibly cropped and subsampled input image and
computes the minimum, maximum and sum of all pixels as well as per-channel
histograms.
    </para>
The HGO can compute histograms independently per channel, on the maximum of the
three channels (RGB data only) or on the Y channel only (YCbCr only). It can
additionally output the histogram with 64 or 256 bins, resulting in four
possible modes of operation.
      <itemizedlist>
	<listitem>
	  <para>
	    In <emphasis>64 bins normal mode</emphasis>, the HGO operates
	    on the three channels independently to compute three 64-bins
	    histograms. RGB, YCbCr and HSV image formats are supported.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    In <emphasis>64 bins maximum mode</emphasis>, the HGO operates
	    on the maximum of the (R, G, B) channels to compute a single
	    64-bins histogram. Only the RGB image format is supported.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    In <emphasis>256 bins normal mode</emphasis>, the HGO operates
	    on the Y channel to compute a single 256-bins histogram. Only the
	    YCbCr image format is supported.
	  </para>
	</listitem>
	<listitem>
	  <para>
	    In <emphasis>256 bins maximum mode</emphasis>, the HGO operates
	    on the maximum of the (R, G, B) channels to compute a single
	    256-bins histogram. Only the RGB image format is supported.
	  </para>
	</listitem>
      </itemizedlist>
    <para>
    </para>
    <para>
All data is stored in memory in little endian format. Each cell in the tables
below contains one byte.
    </para>
    <table frame="none">
      <title>VSP1 HGO Data - 64 Bins, Normal Mode (792 bytes)</title>
      <tgroup cols="5">
	<colspec colnum="1" colname="offset" align="left" />
	<colspec colnum="2" colname="b3"     align="center" />
	<colspec colnum="3" colname="b2"     align="center" />
	<colspec colnum="4" colname="b1"     align="center" />
	<colspec colnum="5" colname="b0"     align="center" />
	<spanspec namest="b3" nameend="b0" spanname="word" colsep="1" align="center" />
	<thead>
	  <row>
	    <entry>Offset</entry>
	    <entry spanname="word">Memory</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry>[31:24]</entry>
	    <entry>[23:16]</entry>
	    <entry>[15:8]</entry>
	    <entry>[7:0]</entry>
	  </row>
	</thead>
	<tbody valign="top">
	  <row>
	    <entry>0</entry>
	    <entry>-</entry>
	    <entry>R/Cr/H max [7:0]</entry>
	    <entry>-</entry>
	    <entry>R/Cr/H min [7:0]</entry>
	  </row>
	  <row>
	    <entry>4</entry>
	    <entry>-</entry>
	    <entry>G/Y/S max [7:0]</entry>
	    <entry>-</entry>
	    <entry>G/Y/S min [7:0]</entry>
	  </row>
	  <row>
	    <entry>8</entry>
	    <entry>-</entry>
	    <entry>B/Cb/V max [7:0]</entry>
	    <entry>-</entry>
	    <entry>B/Cb/V min [7:0]</entry>
	  </row>
	  <row>
	    <entry>12</entry>
	    <entry spanname="word">R/Cr/H sum [31:0]</entry>
	  </row>
	  <row>
	    <entry>16</entry>
	    <entry spanname="word">G/Y/S sum [31:0]</entry>
	  </row>
	  <row>
	    <entry>20</entry>
	    <entry spanname="word">B/Cb/V sum [31:0]</entry>
	  </row>
	  <row>
	    <entry>24</entry>
	    <entry spanname="word">R/Cr/H bin 0 [31:0]</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry spanname="word">...</entry>
	  </row>
	  <row>
	    <entry>276</entry>
	    <entry spanname="word">R/Cr/H bin 63 [31:0]</entry>
	  </row>
	  <row>
	    <entry>280</entry>
	    <entry spanname="word">G/Y/S bin 0 [31:0]</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry spanname="word">...</entry>
	  </row>
	  <row>
	    <entry>532</entry>
	    <entry spanname="word">G/Y/S bin 63 [31:0]</entry>
	  </row>
	  <row>
	    <entry>536</entry>
	    <entry spanname="word">B/Cb/V bin 0 [31:0]</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry spanname="word">...</entry>
	  </row>
	  <row>
	    <entry>788</entry>
	    <entry spanname="word">B/Cb/V bin 63 [31:0]</entry>
	  </row>
	</tbody>
      </tgroup>
    </table>
    <table frame="none">
      <title>VSP1 HGO Data - 64 Bins, Max Mode (264 bytes)</title>
      <tgroup cols="5">
	<colspec colnum="1" colname="offset" align="left" />
	<colspec colnum="2" colname="b3"     align="center" />
	<colspec colnum="3" colname="b2"     align="center" />
	<colspec colnum="4" colname="b1"     align="center" />
	<colspec colnum="5" colname="b0"     align="center" />
	<spanspec namest="b3" nameend="b0" spanname="word" colsep="1" align="center" />
	<thead>
	  <row>
	    <entry>Offset</entry>
	    <entry spanname="word">Memory</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry>[31:24]</entry>
	    <entry>[23:16]</entry>
	    <entry>[15:8]</entry>
	    <entry>[7:0]</entry>
	  </row>
	</thead>
	<tbody valign="top">
	  <row>
	    <entry>0</entry>
	    <entry>-</entry>
	    <entry>max(R,G,B) max [7:0]</entry>
	    <entry>-</entry>
	    <entry>max(R,G,B) min [7:0]</entry>
	  </row>
	  <row>
	    <entry>4</entry>
	    <entry spanname="word">max(R,G,B) sum [31:0]</entry>
	  </row>
	  <row>
	    <entry>8</entry>
	    <entry spanname="word">max(R,G,B) bin 0 [31:0]</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry spanname="word">...</entry>
	  </row>
	  <row>
	    <entry>260</entry>
	    <entry spanname="word">max(R,G,B) bin 63 [31:0]</entry>
	  </row>
	</tbody>
      </tgroup>
    </table>
    <table frame="none">
      <title>VSP1 HGO Data - 256 Bins, Normal Mode (1032 bytes)</title>
      <tgroup cols="5">
	<colspec colnum="1" colname="offset" align="left" />
	<colspec colnum="2" colname="b3"     align="center" />
	<colspec colnum="3" colname="b2"     align="center" />
	<colspec colnum="4" colname="b1"     align="center" />
	<colspec colnum="5" colname="b0"     align="center" />
	<spanspec namest="b3" nameend="b0" spanname="word" colsep="1" align="center" />
	<thead>
	  <row>
	    <entry>Offset</entry>
	    <entry spanname="word">Memory</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry>[31:24]</entry>
	    <entry>[23:16]</entry>
	    <entry>[15:8]</entry>
	    <entry>[7:0]</entry>
	  </row>
	</thead>
	<tbody valign="top">
	  <row>
	    <entry>0</entry>
	    <entry>-</entry>
	    <entry>Y max [7:0]</entry>
	    <entry>-</entry>
	    <entry>Y min [7:0]</entry>
	  </row>
	  <row>
	    <entry>4</entry>
	    <entry spanname="word">Y sum [31:0]</entry>
	  </row>
	  <row>
	    <entry>8</entry>
	    <entry spanname="word">Y bin 0 [31:0]</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry spanname="word">...</entry>
	  </row>
	  <row>
	    <entry>1028</entry>
	    <entry spanname="word">Y bin 255 [31:0]</entry>
	  </row>
	</tbody>
      </tgroup>
    </table>
    <table frame="none">
      <title>VSP1 HGO Data - 256 Bins, Max Mode (1032 bytes)</title>
      <tgroup cols="5">
	<colspec colnum="1" colname="offset" align="left" />
	<colspec colnum="2" colname="b3"     align="center" />
	<colspec colnum="3" colname="b2"     align="center" />
	<colspec colnum="4" colname="b1"     align="center" />
	<colspec colnum="5" colname="b0"     align="center" />
	<spanspec namest="b3" nameend="b0" spanname="word" colsep="1" align="center" />
	<thead>
	  <row>
	    <entry>Offset</entry>
	    <entry spanname="word">Memory</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry>[31:24]</entry>
	    <entry>[23:16]</entry>
	    <entry>[15:8]</entry>
	    <entry>[7:0]</entry>
	  </row>
	</thead>
	<tbody valign="top">
	  <row>
	    <entry>0</entry>
	    <entry>-</entry>
	    <entry>max(R,G,B) max [7:0]</entry>
	    <entry>-</entry>
	    <entry>max(R,G,B) min [7:0]</entry>
	  </row>
	  <row>
	    <entry>4</entry>
	    <entry spanname="word">max(R,G,B) sum [31:0]</entry>
	  </row>
	  <row>
	    <entry>8</entry>
	    <entry spanname="word">max(R,G,B) bin 0 [31:0]</entry>
	  </row>
	  <row>
	    <entry></entry>
	    <entry spanname="word">...</entry>
	  </row>
	  <row>
	    <entry>1028</entry>
	    <entry spanname="word">max(R,G,B) bin 255 [31:0]</entry>
	  </row>
	</tbody>
      </tgroup>
    </table>
  </refsect1>
</refentry>
